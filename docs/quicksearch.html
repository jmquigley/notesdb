<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Documentation Modules util Classes ArtifactNotesDB Global artifactComparator Global Methods artifactComparator(o1, o2) Performs a comparison between two Artifact objects. It uses the absolute path for each artifact as the basis of the comparison. This function is used with the data structures in the util.ds objects. Parameters: Name Type Description o1 Artifact the first artifact to compare. o2 Artifact the second artifact to compare. Returns: 0 if o1 &amp; o2 are the same, 1 if o1 &gt; o2, -1 if o1 &lt; o2. Type number × Search results Close Documentation generated by JSDoc 3.4.3 on April 28th 2017, 5:41:48 pm using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules util Classes ArtifactNotesDB Global artifactComparator Modules Classes Artifact NotesDB × Search results Close Documentation generated by JSDoc 3.4.3 on April 28th 2017, 5:41:48 pm using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Modules util Classes ArtifactNotesDB Global artifactComparator Classes Classes Artifact NotesDB × Search results Close Documentation generated by JSDoc 3.4.3 on April 28th 2017, 5:41:48 pm using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules util Classes ArtifactNotesDB Global artifactComparator notesdb A text file notes database The text &quot;database&quot; is just a data structure (schema) and a set of functions to manipulate a structured directory. The &quot;database&quot; is referred to as a binder. The binder contains sections. Each of the sections contain notebooks. Each notebook contains artifacts (files). The general structure of the binder is: {binder}/ {section}/ {notebook 1}/ - {artifact 1} - {artifact 2} - {artifact N} {notebook 2}/ - {artifact 1} - {artifact 2} - {artifact N} {section N}/ ... The main component is the artifact. These are the text files. The other items in the structure above are basic file directory structures. Sections and notebooks are just organizing constructs (directories). Features Promised based public API Automatic timed save of documents Trashcan InstallationTo install as a global package and cli: $ npm install --global notesdbTo install as an application dependency with cli: $ npm install --save-dev notesdbTo build the app and run all tests: $ npm run allUsageThe public api contains the following functions: add() create() emptyTrash() find() get() hasArtifact() hasNotebook() hasSection() notebooks() reload() remove() rename() restore() save() saveArtifact() sections() shutdown() toString() trash() Creating an InstanceTo construct a new instance: const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB();Loads a default instance of the schema. This example contains no configuration options. It will use the default configuration directory of ~/.notesdb. The configuration file for this instance is saved in ~/.notesdb/config.json. The log file for the database is saved within this directory in ~/notesdb/notesdb.log. The default name of the database is adb (the name of the binder) and is saved in ~/.notesdb/adb. This is where all sections, notebooks, and artifacts will be saved. An instance can be created with a new set of defaults: const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB({ binderName: 'sampledb', root: '~/mydb' });This will create a new binder with the name sampledb. It also changes where the configuration will be saved root option. This is the default location where the schema will be stored. If the only the root is specified, then the configuration is also located in this directory. This database is saved in ~/mydb/sampledb. The configuration and the database can be separated: const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB({ binderName: 'sampledb', configRoot: '~/mydbconfig', root: '~/mydb' });This will create the database in ~/mydb/sampledb and the configuration/logs are stored in ~/mydbconfig. Creating SectionsOnce an instance is created sections can be added. There are two ways to do this. The create() or add. Using the create method: const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.create(['Test1', 'Test2']) .then((adb: NotesDB) =&gt; { let sections = adb.sections(); sections.forEach((section: string) =&gt; { console.log(` ~&gt; ${section}`); }); return adb; }) .catch((err: string) =&gt; { console.error(err); });This will create two new sections within the schema named Test1 and Test2. It will also contain Default and Trash. Sections can also be created through the add method. This method uses an Artifact object during creation. const Artifact = require('artifact').Artifact; const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.add(Artifact.factory('all', {section: 'Test1'})) .then((adb: NotesDB) =&gt; { let sections = adb.sections(); sections.forEach((section: string) =&gt; { console.log(` ~&gt; ${section}`); }); return adb; }) .catch((err: string) =&gt; { console.error(err); });Creating NotebooksA notebook is created with the add method. const Artifact = require('artifact').Artifact; const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.add(Artifact.factory('all', {section: 'Test1', notebook: 'MyNotebook'})) .then((artifact: Artifact) =&gt; { console.log(artifact.toString()); let notebooks = adb.notebooks(); notebooks.forEach((notebook: string) =&gt; { console.log(` ~&gt; ${notebook}`); }); return adb; }) .catch((err: string) =&gt; { console.error(err); });This will create a section named Test1 (if it doesn't exist) and a notebook within that section named MyNotebook. Creating ArtifactsAn artifact is the basic document within the notebook. These are always text files. That are created with the add method: const Artifact = require('artifact').Artifact; const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.add({ section: 'Test1', notebook: 'MyNotebook', filename: 'myfile.txt' }) .then((artifact: Artifact) =&gt; { console.log(artifact.toString()); }) .catch((err: string) =&gt; { console.error(err); });Retrieving ArtifactsArtifacts are placed into the system by adding them (as above) or when an instance is created (the existing artifacts are loaded automatically). The artifacts are then retrieved from the system using the get method. When retrieving an artifact one must use section, notebook, and filename to retrieve it: const Artifact = require('artifact').Artifact; const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.get({ section: 'Default', notebook: 'Default', filename: 'test1.txt' }) .then((artifact: Artifact) =&gt; { // do something with the artifact }) .catch((err: string) =&gt; { console.error(err); });Finding ArtifactsOne can also retrieve artifacts using the find method. This will perform a regex text search, using JavaScript regex, using all artifacts that are in the system. It will return an array of artifacts that contain the search string. const Artifact = require('artifact').Artifact; const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.find('#1') .then((artifacts: Array&lt;Artifact&gt;) =&gt; { artifacts.forEach((artifact: Artifact) =&gt; { console.log(artifact.absolute()); }); }) .catch((err: string) =&gt; { console.error(err); });This call would find all artifacts that contain the string #1 and return an array. Renaming ArtifactsThe name of an artifact can be changed using the rename method. It takes two parameters: the source location and the destination location: const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); let src = { section: 'Test1', notebook: 'Default', filename: 'test4.txt' } let dst = { section: 'Test2', notebook: 'Default', filename: 'test4.txt' } adb.rename(src, dst) .then((filename: string) =&gt; { console.log(`renamed to: ${filename}`); }) .catch((err: string) =&gt; { console.error(err); });This example will rename the artifact Test1/Default/test4.txt to Test2/Default/test4.txt. Trashing/Restoring ArtifactsArtifacts are not removed from the system directly (generally). They are first moved to a special Trash folder within the notebook. An artifact is removed with the trash method. A removed artifact can be recovered from the trash using the restore method: const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); let lookup = { section: 'Test2', notebook: 'Default', filename: 'test4.txt' } adb.trash(lookup) .then((filename: string) =&gt; { console.log(`trashed: ${filename}`); return adb.restore(lookup); }) .then((filename: string) =&gt; { console.log(`restored: ${filename}`); }) .catch((err: string) =&gt; { console.error(err); });The example above would move the artifact /Test2/Default/test4.txt and place it in the trash. After it is removed it is immediately restored back to its original path. If there is a name collision on delete/restore, then the current timestamp is placed on the artifacts name. In this example a file artifact is removed. Sections and notebooks can also be removed/restored. Emptying the TrashArtifacts that were removed are not permanently removed until the trash is emptied. That is performed with the emptyTrash method. const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.emptyTrash() .then((adb: NotesDB) =&gt; { assert(_.isEmpty(adb.schema.trash)); }) .catch((err: string) =&gt; { console.error(err); });ShutdownThe shutdown method immediately saves the binder, marks the instance as uninitialized, and turns off the automatic saving of documents. It's a way to ensure proper cleanup once finished using this binder. const NotesDB = require('notesdb').NotesDB; let adb = new NotesDB(); adb.shutdown() .then((msg: string) =&gt; { console.log(msg); }) .catch((err: string) =&gt; { console.error(err); });It returns a message indicating that the binder was shutdown. APIThe API is generated with JSDoc. It can be found within the docs directory for the project. It can be generated with npm run docs. An HTML site is generated in this directory that gives details on the api. Artifact NotesDB × Search results Close Documentation generated by JSDoc 3.4.3 on April 28th 2017, 5:41:48 pm using the DocStrap template. "},"Artifact.html":{"id":"Artifact.html","title":"Class: Artifact","body":" Documentation Modules util Classes ArtifactNotesDB Global artifactComparator Class: Artifact Artifact A container class that holds the information for a single artifact within the database. new Artifact() The constructor is private. Objects must be created with the factory Members buffer Takes the current input &quot;buf&quot;, converts it to a buffer, and returns it Methods &lt;static&gt; factory(mode [, opts] [, artifact]) A factory method for creating different types of artifacts. The mode determines what type of Artifact object will be factory and returned. The types include: all|default - use a object with properties for each field to factory the object and set its properties treeitem - represents an object that can be parsed in the treetitem format of {section}/{notebook}/{filename} empty - just return an empty object. This is the default. Parameters: Name Type Argument Default Description mode string tells the factory what to make opts Object | string &lt;optional&gt; parameters to the facility that will make the object. artifact Artifact &lt;optional&gt; null if an instance is passed to this factory then it is used instead of creating a new one. Works like a copy constructor. Returns: a newly constructed artifact object. Type Artifact &lt;static&gt; isDuplicateSearch(src, dst) Takes two search objects and checks if they are different. Parameters: Name Type Description src IArtifactSearch 1st search object to check dst IArtifactSearch 2nd search object to check Returns: true if they are the same, otherwise false. &lt;static&gt; isType(search) Takes artifact search information and builds the type id Parameters: Name Type Description search IArtifactSearch an object that contains the current Artifact parameters used to build the type id. Returns: the id associated with this search. Type ArtifactType addTag(tag) Adds a unique tag to the artifact. Parameters: Name Type Description tag string the name of the tag to add. isEqual(artifact) Checks this artifact against a given artifact to show if they are equal Parameters: Name Type Description artifact Artifact input artifact to check against this one Returns: true if the artifacts are the same, otherwise false. Type boolean makeUnique() Takes an artifact and appends a timestamp to the last part of its path Returns: the modified artifact with a timestamp attached to the last element of the path. Type Artifact × Search results Close Documentation generated by JSDoc 3.4.3 on April 28th 2017, 5:41:48 pm using the DocStrap template. "},"module-util.html":{"id":"module-util.html","title":"Module: util","body":" Documentation Modules util Classes ArtifactNotesDB Global artifactComparator Module: util This module contains helper functions used in the txtdb. They represent private functions that are not exposed as part of the main module. Methods &lt;inner&gt; addConsole(logger) Adds a console logging appender to to the logging facility used by the TxtDB class. It checks to see if there is already a console logger in the config. If it is already there, then it is not added again. Parameters: Name Type Description logger Logger a reference to the log4j object. &lt;inner&gt; getDirectories(src) Retrieves a list of directories from the given input path. Parameters: Name Type Description src string the source directory to search for sub directories Returns: a list of directories. Type Array &lt;inner&gt; getUUID(nodash) Retrieves a version 4 uuid. It can be with or without the dash characters. Parameters: Name Type Default Description nodash boolean false if true, the dashes are removed, otherwise just a v4 uuid is created. Returns: a v4 uuid Type string × Search results Close Documentation generated by JSDoc 3.4.3 on April 28th 2017, 5:41:48 pm using the DocStrap template. "},"NotesDB.html":{"id":"NotesDB.html","title":"Class: NotesDB","body":" Documentation Modules util Classes ArtifactNotesDB Global artifactComparator Class: NotesDB NotesDB Creates an instance of the text database class new NotesDB( [opts]) Creates the instance of the NotesDB class and loads or defines the initial configuration parameters. If the schema already exists, then it will be loaded. Parameters: Name Type Argument Description opts object &lt;optional&gt; optional parameters binderName {string} default='adb': The name of the binder when a new database is being created. This is optional. When loading an existing database the name of the binder is retrieved as part of the configuration. configRoot {string} default='~/.notesdb': The name of the configuration directory where the configuration and log files are located. env {object}: a copy of the current runtime environment variables. This allows for the environment to be changed before instantiating the class (for multiple instances and testing). ignore {Array}: the list of file names that this database will ignore when parsing/processing artifacts. root {string} default='~/.notesdb': The path location to the database. This is optional and only needed when creating a new database. saveInterval {number} default='5000': determines how often a save check is performed. The schema is scanned and saved very N millis. Methods add(opts, area, self) Creates the requested artifact within the schema. This will attempt to create each section, notebook, and document given. If the item is empty, then it is ignored. The thenable return for this call is a reference to the artifact that was created. Parameters: Name Type Description opts IArtifactSearch the artifact object to create (see above) area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: a javascript promise object Type Promise create(schema, area, self) Creates new sections within a binder. It takes a list of section strings and creates a directory for each given string. Parameters: Name Type Description schema Array | string a list of directories (sections) under this binder location. Each of these directories will be created under this binder unless they already exist. area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: a javascript promise object Type Promise emptyTrash(self) Removes the current contents of the 'Trash' folder/section from the current DB. It also resets the internal trash namespace to empty. This will check that the directory requested is within the database location and has the 'Trash' directory. The thenable resolves to a reference to the NotesDB instance. Parameters: Name Type Description self NotesDB a reference to the notes database instance Returns: a javascript promise object. Type Promise find(search, self) Performs a text search against all artifacts within the repository. This will return a list of all artifacts tha contain the requested string. The string can be a regex. The thenable from this call is an Array of Artifacts that meet the search criteria. Parameters: Name Type Description search string the regex string to used as the search criteria. self NotesDB a reference to the notes database instance Returns: a javascript promise object Type Promise get(opts, area, self) Retrieves an artifact from the schema. If it exists, then it is returned by the promise. If it is not found, then an error will be thrown. If the artifact has never been loaded before, then it is read from the filesystem when this request is made. This will place the artifact into the recent documents queue. When the request is a section or notebook a temporary artifact object is created and returned. The thenable resolves to the artifact created by the get request. Parameters: Name Type Description opts IArtifactSearch the section/notebook/filename to search for within the schema. area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: a javascript promise object. Type Promise hasArtifact(search, area, self) Checks to see if a document is in the repository by name, notebook and section. Parameters: Name Type Description search IArtifactSearch an object that represents the item to find in the schema. area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: true if the artifact is found, otherwise false Type boolean hasNotebook(search, area, self) Checks the given section for the existence of a notebook by name. Parameters: Name Type Description search IArtifactSearch an object that represents the item to find in the schema. area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: true if the notebook is found, otherwise false Type boolean hasSection(search, area, self) Checks the current schema for the existence of a section. Parameters: Name Type Description search IArtifactSearch an object that represents the item to find in the schema. area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: true if the section is found, otherwise false. Type boolean notebooks(sectionName, area, self) Enumerates the list of notebooks in a section from the schema. returns {Array} a list of the notebooks for a section Parameters: Name Type Description sectionName string the name of the section where the notebooks are located. area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: a list of notebook names as strings Type Array reload(area, self) Scans the current repository directory to rebuild the schema. This only needs to be done if a file/artifact is added to the directory structure after the instance has been loaded. Parameters: Name Type Description area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: a javascript promise object. Type Promise remove(opts, area, self) Immediately removes an section/notebook/artifact from the system. The thenable resolves to a reference to the NotesDB instance. Parameters: Name Type Description opts IArtifactSearch the section/notebook/filename to search for within the schema. area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: a javascript promise object Type Promise rename(src, dst, self) Renames an artifact from the source (src) to destination (dst). The thenable resolves to a reference to the renamed artifact. Parameters: Name Type Description src IArtifactSearch the source artifact that will be changed dst IArtifactSearch the destination artifact that the source will be changed into. self NotesDB a reference to the notes database instance Returns: a javascript promise object. Type Promise restore(opts, self) Takes an item from the trash and puts it back into the schema. If the item is already in the schema, then it appends a timestamp to the name of the item that is being restored. The thenable resolves to the artifact that was retored. Parameters: Name Type Description opts IArtifactSearch The section/notebook/filename to restore self NotesDB a reference to the notes database instance Returns: a javascript promise object. Type Promise save(self) User requested save function. If given an artifact, then a single save is performed. If no artifact is specifid, then the binder artifact list is scanned for dirty artifacts that need to be saved. The thenable resolves to a reference to the NotesDB instance. Parameters: Name Type Description self NotesDB a reference to the notes database instance Returns: a javascript promise object Type Promise saveArtifact(artifact) Performs a save of a single artifact. Parameters: Name Type Description artifact Artifact the artifact value to save Returns: a javascript promise object Type Promise sections(area, self) Enumerates the list of sections from the schema. Parameters: Name Type Description area string the namespace area within the schema object to search. There are two areas: notes &amp; trash. self NotesDB a reference to the notes database instance Returns: a list of section names as strings Type Array shutdown(self) Called when the database is no longer needed. This will cleanup operations and shutdown the intervals. Parameters: Name Type Description self Returns: a javascript promise object Type Promise toString(self) Converts the internal structures to a string and returns it. Parameters: Name Type Description self NotesDB a reference to the notes database instance Returns: a string that shows the configuration and schema for the database. Type string trash(opts, self) Moves an artifact from it's current directory to the &quot;Trash&quot; folder. It is not removed until the emptyTrash() method is called. The artifact is removed from the schema dictionary and stored in the trash dictionary. The thenable resolves to the artifact that was moved to the trash. Parameters: Name Type Description opts IArtifactSearch the section/notebook/filename to remove for within the schema. self NotesDB a reference to the notes database instance Returns: a javascript promise object. Type Promise × Search results Close Documentation generated by JSDoc 3.4.3 on April 28th 2017, 5:41:48 pm using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
