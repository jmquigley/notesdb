<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Documentation Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Documentation</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-util.html">util</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="Artifact.html">Artifact</a></li><li><a href="NotesDB.html">NotesDB</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#artifactComparator">artifactComparator</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	











	
	





    <section class="readme-section">
        <article><h1>notesdb <a href="https://travis-ci.org/jmquigley/notesdb"><img src="https://travis-ci.org/jmquigley/notesdb.svg?branch=master" alt="Build Status"></a> <a href="https://palantir.github.io/tslint/"><img src="https://img.shields.io/badge/code_style-TSlint-5ed9c7.svg" alt="tslint code style"></a> <a href="https://github.com/avajs/ava"><img src="https://img.shields.io/badge/testing-ava-blue.svg" alt="Test Runner"></a> <a href="https://www.npmjs.com/package/notesdb"><img src="https://img.shields.io/npm/v/notesdb.svg" alt="NPM"></a> <a href="https://coveralls.io/github/jmquigley/notesdb?branch=master"><img src="https://coveralls.io/repos/github/jmquigley/notesdb/badge.svg?branch=master" alt="Coverage Status"></a></h1><blockquote>
<p>A text file notes database</p>
</blockquote>
<p>The text &quot;database&quot; is just a data structure (schema) and a set of functions to manipulate a structured directory.  The &quot;database&quot; is referred to as a binder.  The binder contains sections.  Each of the sections contain notebooks.  Each notebook contains artifacts (files).  The general structure of the binder is:</p>
<pre class="prettyprint source"><code>  {binder}/
      {section}/
          {notebook 1}/
              - {artifact 1}
              - {artifact 2}
              - {artifact N}
          {notebook 2}/
              - {artifact 1}
              - {artifact 2}
              - {artifact N}
       {section N}/
           ...</code></pre><p> The main component is the artifact.  These are the text files.  The other items in the structure above are basic file directory structures.  Sections and notebooks are just organizing constructs (directories).</p>
<h4>Features</h4><ul>
<li>Promised based public API</li>
<li>Automatic timed save of documents</li>
<li>Trashcan</li>
</ul>
<h2>Installation</h2><p>To install as a global package and cli:</p>
<pre class="prettyprint source"><code>$ npm install --global notesdb</code></pre><p>To install as an application dependency with cli:</p>
<pre class="prettyprint source"><code>$ npm install --save-dev notesdb</code></pre><p>To build the app and run all tests:</p>
<pre class="prettyprint source"><code>$ npm run all</code></pre><h2>Usage</h2><p>The <a href="docs/notesdb.md">public api</a> contains the following functions:</p>
<ul>
<li><a href="docs/notesdb.md#NotesDB+add">add()</a></li>
<li><a href="docs/notesdb.md#NotesDB+create">create()</a></li>
<li><a href="docs/notesdb.md#NotesDB+emptyTrash">emptyTrash()</a></li>
<li><a href="docs/notesdb.md#NotesDB+find">find()</a></li>
<li><a href="docs/notesdb.md#NotesDB+get">get()</a></li>
<li><a href="docs/notesdb.md#NotesDB+hasArtifact">hasArtifact()</a></li>
<li><a href="docs/notesdb.md#NotesDB+hasNotebook">hasNotebook()</a></li>
<li><a href="docs/notesdb.md#NotesDB+hasSection">hasSection()</a></li>
<li><a href="docs/notesdb.md#NotesDB+notebooks">notebooks()</a></li>
<li><a href="docs/notesdb.md#NotesDB+reload">reload()</a></li>
<li><a href="docs/notesdb.md#NotesDB+remove">remove()</a></li>
<li><a href="docs/notesdb.md#NotesDB+rename">rename()</a></li>
<li><a href="docs/notesdb.md#NotesDB+restore">restore()</a></li>
<li><a href="docs/notesdb.md#NotesDB+save">save()</a></li>
<li><a href="docs/notesdb.md#NotesDB+saveArtifact">saveArtifact()</a></li>
<li><a href="docs/notesdb.md#NotesDB+sections">sections()</a></li>
<li><a href="docs/notesdb.md#NotesDB+shutdown">shutdown()</a></li>
<li><a href="docs/notesdb.md#NotesDB+toString">toString()</a></li>
<li><a href="docs/notesdb.md#NotesDB+trash">trash()</a></li>
</ul>
<h4>Creating an Instance</h4><p>To construct a new instance:</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();</code></pre><p>Loads a default instance of the schema.  This example contains no configuration options.  It will use the default configuration directory of <code>~/.notesdb</code>.  The configuration file for this instance is saved in <code>~/.notesdb/config.json</code>.  The log file for the database is saved within this directory in <code>~/notesdb/notesdb.log</code>.  The default name of the database is <code>adb</code> (the name of the binder) and is saved in <code>~/.notesdb/adb</code>.  This is where all sections, notebooks, and artifacts will be saved.</p>
<p>An instance can be created with a new set of defaults:</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB({
    binderName: 'sampledb',
    root: '~/mydb'
});</code></pre><p>This will create a new binder with the name <code>sampledb</code>.  It also changes where the configuration will be saved <em>root</em> option.  This is the default location where the schema will be stored.  If the only the root is specified, then the configuration is also located in this directory.  This database is saved in <code>~/mydb/sampledb</code>.  The configuration and the database can be separated:</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB({
    binderName: 'sampledb',
    configRoot: '~/mydbconfig',
    root: '~/mydb'
});</code></pre><p>This will create the database in <code>~/mydb/sampledb</code> and the configuration/logs are stored in <code>~/mydbconfig</code>.</p>
<h4>Creating Sections</h4><p>Once an instance is created sections can be added.  There are two ways to do this.  The <code>create()</code> or <code>add</code>.  Using the create method:</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.create(['Test1', 'Test2'])
    .then((adb: NotesDB) => {
        let sections = adb.sections();
        sections.forEach((section: string) => {
            console.log(` ~> ${section}`);
        });

        return adb;
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><p>This will create two new sections within the schema named <code>Test1</code> and <code>Test2</code>.  It will also contain <code>Default</code> and <code>Trash</code>.  Sections can also be created through the <code>add</code> method.  This method uses an <code>Artifact</code> object during creation.</p>
<pre class="prettyprint source lang-javascript"><code>const Artifact = require('artifact').Artifact;
const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.add(Artifact.factory('all', {section: 'Test1'}))
    .then((adb: NotesDB) => {
        let sections = adb.sections();
        sections.forEach((section: string) => {
            console.log(` ~> ${section}`);
        });

        return adb;
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><h4>Creating Notebooks</h4><p>A notebook is created with the <code>add</code> method.</p>
<pre class="prettyprint source lang-javascript"><code>const Artifact = require('artifact').Artifact;
const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.add(Artifact.factory('all', {section: 'Test1', notebook: 'MyNotebook'}))
    .then((artifact: Artifact) => {
        console.log(artifact.toString());
        let notebooks = adb.notebooks();
        notebooks.forEach((notebook: string) => {
            console.log(` ~> ${notebook}`);
        });

        return adb;
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><p>This will create a section named <code>Test1</code> (if it doesn't exist) and a notebook within that section named <code>MyNotebook</code>.</p>
<h4>Creating Artifacts</h4><p>An artifact is the basic document within the notebook.  These are always text files.  That are created with the <code>add</code> method:</p>
<pre class="prettyprint source lang-javascript"><code>const Artifact = require('artifact').Artifact;
const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.add({
    section: 'Test1', 
    notebook: 'MyNotebook', 
    filename: 'myfile.txt'
    })
    .then((artifact: Artifact) => {
        console.log(artifact.toString());
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><h4>Retrieving Artifacts</h4><p>Artifacts are placed into the system by adding them (as above) or when an instance is created (the existing artifacts are loaded automatically).  The artifacts are then retrieved from the system using the <code>get</code> method.  When retrieving an artifact one must use <em>section</em>, <em>notebook</em>, and <em>filename</em> to retrieve it:</p>
<pre class="prettyprint source lang-javascript"><code>const Artifact = require('artifact').Artifact;
const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.get({
    section: 'Default', 
    notebook: 'Default', 
    filename: 'test1.txt'
    })
    .then((artifact: Artifact) => {
        // do something with the artifact
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><h4>Finding Artifacts</h4><p>One can also retrieve artifacts using the <code>find</code> method.  This will perform a regex text search, using JavaScript regex, using all artifacts that are in the system.  It will return an array of artifacts that contain the search string.</p>
<pre class="prettyprint source lang-javascript"><code>const Artifact = require('artifact').Artifact;
const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.find('#1')
    .then((artifacts: Array&lt;Artifact>) => {
        artifacts.forEach((artifact: Artifact) => {
            console.log(artifact.absolute());
        });
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><p>This call would find all artifacts that contain the string <code>#1</code> and return an array.</p>
<h4>Renaming Artifacts</h4><p>The name of an artifact can be changed using the <code>rename</code> method.  It takes two parameters: the source location and the destination location:</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
let src = {
    section: 'Test1',
    notebook: 'Default',
    filename: 'test4.txt'
}

let dst = {
    section: 'Test2',
    notebook: 'Default',
    filename: 'test4.txt'
}

adb.rename(src, dst)
    .then((filename: string) => {
        console.log(`renamed to: ${filename}`);
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><p>This example will rename the artifact <code>Test1/Default/test4.txt</code> to <code>Test2/Default/test4.txt</code>.</p>
<h4>Trashing/Restoring Artifacts</h4><p>Artifacts are not removed from the system directly (generally).  They are first moved to a special <code>Trash</code> folder within the notebook.  An artifact is removed with the <code>trash</code> method.  A removed artifact can be recovered from the trash using the <code>restore</code> method:</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
let lookup = {
    section: 'Test2',
    notebook: 'Default',
    filename: 'test4.txt'
}

adb.trash(lookup)
    .then((filename: string) => {
        console.log(`trashed: ${filename}`);
        return adb.restore(lookup);
    })
    .then((filename: string) => {
        console.log(`restored: ${filename}`);
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><p>The example above would move the artifact <code>/Test2/Default/test4.txt</code> and place it in the trash.  After it is removed it is immediately restored back to its original path.  If there is a name collision on delete/restore, then the current timestamp is placed on the artifacts name.  In this example a file artifact is removed.  Sections and notebooks can also be removed/restored.</p>
<h4>Emptying the Trash</h4><p>Artifacts that were removed are not permanently removed until the trash is emptied.  That is performed with the <code>emptyTrash</code> method.</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.emptyTrash()
    .then((adb: NotesDB) => {
        assert(_.isEmpty(adb.schema.trash));
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><h4>Shutdown</h4><p>The <code>shutdown</code> method immediately saves the binder, marks the instance as uninitialized, and turns off the automatic saving of documents.  It's a way to ensure proper cleanup once finished using this binder.</p>
<pre class="prettyprint source lang-javascript"><code>const NotesDB = require('notesdb').NotesDB;

let adb = new NotesDB();
adb.shutdown()
    .then((msg: string) => {
        console.log(msg);
    })
    .catch((err: string) => {
        console.error(err);
    });</code></pre><p>It returns a message indicating that the binder was shutdown.</p>
<h2>API</h2><p>The API is generated with <a href="https://www.npmjs.com/package/jsdoc">JSDoc</a>.  It can be found within the <code>docs</code> directory for the project.  It can be generated with <code>npm run docs</code>.  An HTML site is generated in this directory that gives details on the api.</p>
<ul>
<li><a href="docs/artifact.md">Artifact</a></li>
<li><a href="docs/notesdb.md">NotesDB</a></li>
</ul></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a>
	
		on April 20th 2017, 12:48:12 pm
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>